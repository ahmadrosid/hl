<table class="highlight-table">
<tbody>
<tr><td class="hl-num" data-line="1"></td><td><span class="hl-k">package</span> org.schabi.newpipe;</td></tr>
<tr><td class="hl-num" data-line="2"></td><td></td></tr>
<tr><td class="hl-num" data-line="3"></td><td><span class="hl-k">import</span> java.io.IOException;</td></tr>
<tr><td class="hl-num" data-line="4"></td><td><span class="hl-k">import</span> java.net.SocketException;</td></tr>
<tr><td class="hl-num" data-line="5"></td><td><span class="hl-k">import</span> java.util.Arrays;</td></tr>
<tr><td class="hl-num" data-line="6"></td><td></td></tr>
<tr><td class="hl-num" data-line="7"></td><td><span class="hl-k">private</span> <span class="hl-k">static</span> <span class="hl-k">final</span> <span class="hl-k">char</span> EXTENSION_SEPARATOR = <span class="hl-s">'.'</span>;</td></tr>
<tr><td class="hl-num" data-line="8"></td><td><span class="hl-k">private</span> <span class="hl-k">static</span> <span class="hl-k">final</span> <span class="hl-k">int</span> PERSPECTIVE_ARRAY_INVERTED_CAMERA_DISTANCE_INDEX = <span class="hl-c">2</span>;</td></tr>
<tr><td class="hl-num" data-line="9"></td><td><span class="hl-k">private</span> <span class="hl-k">static</span> <span class="hl-k">final</span> <span class="hl-k">float</span> CAMERA_DISTANCE_NORMALIZATION_MULTIPLIER = (<span class="hl-k">float</span>) Math.<span class="hl-en">sqrt</span>(<span class="hl-c">5</span>);</td></tr>
<tr><td class="hl-num" data-line="10"></td><td><span class="hl-k">private</span> <span class="hl-k">static</span> <span class="hl-k">double</span>[] sTransformDecompositionArray = <span class="hl-k">new</span> <span class="hl-k">double</span>[<span class="hl-c">16</span>];</td></tr>
<tr><td class="hl-num" data-line="11"></td><td></td></tr>
<tr><td class="hl-num" data-line="12"></td><td><span class="hl-k">public</span> <span class="hl-k">static</span> <span class="hl-k">boolean</span> <span class="hl-en">isIntersectionEmpty</span>(<span class="hl-k">@NotNull</span> KotlinType typeA, <span class="hl-k">@NotNull</span> KotlinType typeB) {</td></tr>
<tr><td class="hl-num" data-line="13"></td><td>    <span class="hl-k">assert</span> !types.<span class="hl-en">isEmpty</span>() : <span class="hl-s">"Attempting to intersect empty collection of types, this case should be dealt with on the call site."</span>;</td></tr>
<tr><td class="hl-num" data-line="14"></td><td></td></tr>
<tr><td class="hl-num" data-line="15"></td><td>    <span class="hl-k">if</span> (types.<span class="hl-en">size</span>() == <span class="hl-c">1</span>) {</td></tr>
<tr><td class="hl-num" data-line="16"></td><td>        <span class="hl-k">return</span> types.<span class="hl-en">iterator</span>().<span class="hl-en">next</span>();</td></tr>
<tr><td class="hl-num" data-line="17"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="18"></td><td></td></tr>
<tr><td class="hl-num" data-line="19"></td><td>    <span class="hl-cmt">// Intersection of T1..Tn is an intersection of their non-null versions,</span></td></tr>
<tr><td class="hl-num" data-line="20"></td><td>    <span class="hl-cmt">//   made nullable is they all were nullable</span></td></tr>
<tr><td class="hl-num" data-line="21"></td><td>    KotlinType nothingOrNullableNothing = <span class="hl-c">null</span>;</td></tr>
<tr><td class="hl-num" data-line="22"></td><td>    <span class="hl-k">boolean</span> allNullable = <span class="hl-c">true</span>;</td></tr>
<tr><td class="hl-num" data-line="23"></td><td>    <span class="hl-k">List</span><KotlinType> nullabilityStripped = <span class="hl-k">new</span> <span class="hl-k">ArrayList</span><>(types.<span class="hl-en">size</span>());</td></tr>
<tr><td class="hl-num" data-line="24"></td><td>    <span class="hl-k">for</span> (KotlinType type : types) {</td></tr>
<tr><td class="hl-num" data-line="25"></td><td>        <span class="hl-k">if</span> (KotlinTypeKt.<span class="hl-en">isError</span>(type)) <span class="hl-k">continue</span>;</td></tr>
<tr><td class="hl-num" data-line="26"></td><td></td></tr>
<tr><td class="hl-num" data-line="27"></td><td>        allNullable &= type.<span class="hl-en">isMarkedNullable</span>();</td></tr>
<tr><td class="hl-num" data-line="28"></td><td>        nullabilityStripped.<span class="hl-en">add</span>(TypeUtils.<span class="hl-en">makeNotNullable</span>(type));</td></tr>
<tr><td class="hl-num" data-line="29"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="30"></td><td>    <span class="hl-k">Map</span><TypeParameterDescriptor, Variance> parameters = <span class="hl-k">new</span> <span class="hl-k">HashMap</span><>();</td></tr>
<tr><td class="hl-num" data-line="31"></td><td>    Function1<TypeParameterUsage, Unit> processor = parameterUsage -> {</td></tr>
<tr><td class="hl-num" data-line="32"></td><td>        Variance howTheTypeIsUsedBefore = parameters.<span class="hl-en">get</span>(parameterUsage.typeParameterDescriptor);</td></tr>
<tr><td class="hl-num" data-line="33"></td><td>        <span class="hl-k">if</span> (howTheTypeIsUsedBefore == <span class="hl-c">null</span>) {</td></tr>
<tr><td class="hl-num" data-line="34"></td><td>            howTheTypeIsUsedBefore = Variance.INVARIANT;</td></tr>
<tr><td class="hl-num" data-line="35"></td><td>        }</td></tr>
<tr><td class="hl-num" data-line="36"></td><td>        parameters.<span class="hl-en">put</span>(parameterUsage.typeParameterDescriptor,</td></tr>
<tr><td class="hl-num" data-line="37"></td><td>                       parameterUsage.howTheTypeParameterIsUsed.<span class="hl-en">superpose</span>(howTheTypeIsUsedBefore));</td></tr>
<tr><td class="hl-num" data-line="38"></td><td>        <span class="hl-k">return</span> Unit.INSTANCE;</td></tr>
<tr><td class="hl-num" data-line="39"></td><td>    };</td></tr>
<tr><td class="hl-num" data-line="40"></td><td></td></tr>
<tr><td class="hl-num" data-line="41"></td><td>    <span class="hl-k">return</span> <span class="hl-en">intersectTypes</span>(<span class="hl-k">new</span> <span class="hl-k">LinkedHashSet</span><>(Arrays.<span class="hl-en">asList</span>(typeA, typeB))) == <span class="hl-c">null</span>;</td></tr>
<tr><td class="hl-num" data-line="42"></td><td>}</td></tr>
<tr><td class="hl-num" data-line="43"></td><td></td></tr>
<tr><td class="hl-num" data-line="44"></td><td><span class="hl-k">public</span> <span class="hl-k">interface</span> MeshPartBuilder {</td></tr>
<tr><td class="hl-num" data-line="45"></td><td>    <span class="hl-k">public</span> MeshPart getMeshPart ();</td></tr>
<tr><td class="hl-num" data-line="46"></td><td>    <span class="hl-k">public</span> <span class="hl-k">short</span> vertex (<span class="hl-k">final</span> <span class="hl-k">float</span>... values);</td></tr>
<tr><td class="hl-num" data-line="47"></td><td>    <span class="hl-k">public</span> <span class="hl-k">boolean</span> isVertexTransformationEnabled ();</td></tr>
<tr><td class="hl-num" data-line="48"></td><td>}</td></tr>
<tr><td class="hl-num" data-line="49"></td><td></td></tr>
<tr><td class="hl-num" data-line="50"></td><td><span class="hl-cmt">/*</span></td></tr>
<tr><td class="hl-num" data-line="51"></td><td><span class="hl-cmt"> * Copyright (C) Hans-Christoph Steiner 2016 &lt;hans@eds.org&gt;</span></td></tr>
<tr><td class="hl-num" data-line="52"></td><td><span class="hl-cmt"> * App.java is part of NewPipe.</span></td></tr>
<tr><td class="hl-num" data-line="53"></td><td><span class="hl-cmt"> *</span></td></tr>
<tr><td class="hl-num" data-line="54"></td><td><span class="hl-cmt"> * You should have received a copy of the GNU General Public License</span></td></tr>
<tr><td class="hl-num" data-line="55"></td><td><span class="hl-cmt"> * along with NewPipe.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></td></tr>
<tr><td class="hl-num" data-line="56"></td><td><span class="hl-cmt"> */</span></td></tr>
<tr><td class="hl-num" data-line="57"></td><td><span class="hl-k">public</span> <span class="hl-k">abstract</span> <span class="hl-k">class</span> App <span class="hl-k">extends</span> MultiDexApplication {</td></tr>
<tr><td class="hl-num" data-line="58"></td><td>    <span class="hl-k">public</span> <span class="hl-k">static</span> <span class="hl-k">final</span> String PACKAGE_NAME = BuildConfig.APPLICATION_ID;</td></tr>
<tr><td class="hl-num" data-line="59"></td><td>    <span class="hl-k">private</span> <span class="hl-k">static</span> <span class="hl-k">final</span> String TAG = App.<span class="hl-k">class</span>.<span class="hl-en">toString</span>();</td></tr>
<tr><td class="hl-num" data-line="60"></td><td>    <span class="hl-k">private</span> <span class="hl-k">static</span> App app;</td></tr>
<tr><td class="hl-num" data-line="61"></td><td>    <span class="hl-k">final</span> <span class="hl-k">static</span> <span class="hl-k">float</span> MAX_VELOCITY = <span class="hl-c">14</span>f;</td></tr>
<tr><td class="hl-num" data-line="62"></td><td></td></tr>
<tr><td class="hl-num" data-line="63"></td><td>    <span class="hl-k">@NonNull</span></td></tr>
<tr><td class="hl-num" data-line="64"></td><td>    <span class="hl-k">public</span> <span class="hl-k">static</span> App <span class="hl-en">getApp</span>() {</td></tr>
<tr><td class="hl-num" data-line="65"></td><td>        <span class="hl-k">return</span> app;</td></tr>
<tr><td class="hl-num" data-line="66"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="67"></td><td></td></tr>
<tr><td class="hl-num" data-line="68"></td><td>    <span class="hl-k">@Override</span></td></tr>
<tr><td class="hl-num" data-line="69"></td><td>    <span class="hl-k">protected</span> <span class="hl-k">void</span> <span class="hl-en">attachBaseContext</span>(<span class="hl-k">final</span> Context base) {</td></tr>
<tr><td class="hl-num" data-line="70"></td><td>        <span class="hl-c">super</span>.<span class="hl-en">attachBaseContext</span>(base);</td></tr>
<tr><td class="hl-num" data-line="71"></td><td>        <span class="hl-en">initACRA</span>();</td></tr>
<tr><td class="hl-num" data-line="72"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="73"></td><td></td></tr>
<tr><td class="hl-num" data-line="74"></td><td>    <span class="hl-k">@Override</span></td></tr>
<tr><td class="hl-num" data-line="75"></td><td>    <span class="hl-k">public</span> <span class="hl-k">void</span> <span class="hl-en">onCreate</span>() {</td></tr>
<tr><td class="hl-num" data-line="76"></td><td>        <span class="hl-c">super</span>.<span class="hl-en">onCreate</span>();</td></tr>
<tr><td class="hl-num" data-line="77"></td><td></td></tr>
<tr><td class="hl-num" data-line="78"></td><td>        app = <span class="hl-c">this</span>;</td></tr>
<tr><td class="hl-num" data-line="79"></td><td></td></tr>
<tr><td class="hl-num" data-line="80"></td><td>        <span class="hl-k">if</span> (ProcessPhoenix.<span class="hl-en">isPhoenixProcess</span>(<span class="hl-c">this</span>)) {</td></tr>
<tr><td class="hl-num" data-line="81"></td><td>            Log.<span class="hl-en">i</span>(TAG, <span class="hl-s">"This is a phoenix process! "</span></td></tr>
<tr><td class="hl-num" data-line="82"></td><td>                    + <span class="hl-s">"Aborting initialization of App[onCreate]"</span>);</td></tr>
<tr><td class="hl-num" data-line="83"></td><td>            <span class="hl-k">return</span>;</td></tr>
<tr><td class="hl-num" data-line="84"></td><td>        }</td></tr>
<tr><td class="hl-num" data-line="85"></td><td></td></tr>
<tr><td class="hl-num" data-line="86"></td><td>        <span class="hl-cmt">// Initialize settings first because others inits can use its values</span></td></tr>
<tr><td class="hl-num" data-line="87"></td><td>        NewPipeSettings.<span class="hl-en">initSettings</span>(<span class="hl-c">this</span>);</td></tr>
<tr><td class="hl-num" data-line="88"></td><td></td></tr>
<tr><td class="hl-num" data-line="89"></td><td>        NewPipe.<span class="hl-en">init</span>(<span class="hl-en">getDownloader</span>(),</td></tr>
<tr><td class="hl-num" data-line="90"></td><td>            Localization.<span class="hl-en">getPreferredLocalization</span>(<span class="hl-c">this</span>),</td></tr>
<tr><td class="hl-num" data-line="91"></td><td>            Localization.<span class="hl-en">getPreferredContentCountry</span>(<span class="hl-c">this</span>));</td></tr>
<tr><td class="hl-num" data-line="92"></td><td>        Localization.<span class="hl-en">initPrettyTime</span>(Localization.<span class="hl-en">resolvePrettyTime</span>(<span class="hl-en">getApplicationContext</span>()));</td></tr>
<tr><td class="hl-num" data-line="93"></td><td></td></tr>
<tr><td class="hl-num" data-line="94"></td><td>        StateSaver.<span class="hl-en">init</span>(<span class="hl-c">this</span>);</td></tr>
<tr><td class="hl-num" data-line="95"></td><td>        ServiceHelper.<span class="hl-en">initServices</span>(<span class="hl-c">this</span>);</td></tr>
<tr><td class="hl-num" data-line="96"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="97"></td><td></td></tr>
<tr><td class="hl-num" data-line="98"></td><td>    <span class="hl-k">public</span> UTF8String <span class="hl-en">substring</span>(<span class="hl-k">final</span> <span class="hl-k">int</span> start, <span class="hl-k">final</span> <span class="hl-k">int</span> until) {</td></tr>
<tr><td class="hl-num" data-line="99"></td><td>        <span class="hl-k">int</span> j = i;</td></tr>
<tr><td class="hl-num" data-line="100"></td><td>        <span class="hl-k">while</span> (i < numBytes && c < until) {</td></tr>
<tr><td class="hl-num" data-line="101"></td><td>            i += <span class="hl-en">numBytesForFirstByte</span>(<span class="hl-en">getByte</span>(i));</td></tr>
<tr><td class="hl-num" data-line="102"></td><td>            c += <span class="hl-c">1</span>;</td></tr>
<tr><td class="hl-num" data-line="103"></td><td>        }</td></tr>
<tr><td class="hl-num" data-line="104"></td><td>        <span class="hl-k">if</span> (i > j) {</td></tr>
<tr><td class="hl-num" data-line="105"></td><td>            <span class="hl-k">byte</span>[] bytes = <span class="hl-k">new</span> <span class="hl-k">byte</span>[i - j];</td></tr>
<tr><td class="hl-num" data-line="106"></td><td>            <span class="hl-en">copyMemory</span>(base, offset + j, bytes, BYTE_ARRAY_OFFSET, i - j);</td></tr>
<tr><td class="hl-num" data-line="107"></td><td>            <span class="hl-k">return</span> <span class="hl-en">fromBytes</span>(bytes);</td></tr>
<tr><td class="hl-num" data-line="108"></td><td>        } <span class="hl-k">else</span> {</td></tr>
<tr><td class="hl-num" data-line="109"></td><td>            <span class="hl-k">return</span> EMPTY_UTF8;</td></tr>
<tr><td class="hl-num" data-line="110"></td><td>        }</td></tr>
<tr><td class="hl-num" data-line="111"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="112"></td><td></td></tr>
<tr><td class="hl-num" data-line="113"></td><td>    <span class="hl-k">@Override</span></td></tr>
<tr><td class="hl-num" data-line="114"></td><td>    <span class="hl-k">public</span> <span class="hl-k">void</span> <span class="hl-en">onTerminate</span>() {</td></tr>
<tr><td class="hl-num" data-line="115"></td><td>        <span class="hl-c">super</span>.<span class="hl-en">onTerminate</span>();</td></tr>
<tr><td class="hl-num" data-line="116"></td><td>        PicassoHelper.<span class="hl-en">terminate</span>();</td></tr>
<tr><td class="hl-num" data-line="117"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="118"></td><td></td></tr>
<tr><td class="hl-num" data-line="119"></td><td>    <span class="hl-k">@Override</span></td></tr>
<tr><td class="hl-num" data-line="120"></td><td>    <span class="hl-k">@ReactProp</span>(name = ViewProps.TRANSFORM)</td></tr>
<tr><td class="hl-num" data-line="121"></td><td>    <span class="hl-k">public</span> <span class="hl-k">void</span> <span class="hl-en">setTransform</span>(<span class="hl-k">@NonNull</span> T view, <span class="hl-k">@Nullable</span> ReadableArray matrix) {</td></tr>
<tr><td class="hl-num" data-line="122"></td><td>        <span class="hl-k">if</span> (matrix == <span class="hl-c">null</span>) {</td></tr>
<tr><td class="hl-num" data-line="123"></td><td>            <span class="hl-en">resetTransformProperty</span>(view);</td></tr>
<tr><td class="hl-num" data-line="124"></td><td>        } <span class="hl-k">else</span> {</td></tr>
<tr><td class="hl-num" data-line="125"></td><td>            <span class="hl-en">setTransformProperty</span>(view, matrix);</td></tr>
<tr><td class="hl-num" data-line="126"></td><td>        }</td></tr>
<tr><td class="hl-num" data-line="127"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="128"></td><td></td></tr>
<tr><td class="hl-num" data-line="129"></td><td>    <span class="hl-k">private</span> <span class="hl-k">void</span> <span class="hl-en">configureRxJavaErrorHandler</span>() {</td></tr>
<tr><td class="hl-num" data-line="130"></td><td>        <span class="hl-cmt">// https://github.com/ReactiveX/RxJava/wiki/What's-different-in-2.0#error-handling</span></td></tr>
<tr><td class="hl-num" data-line="131"></td><td>        RxJavaPlugins.<span class="hl-en">setErrorHandler</span>(<span class="hl-k">new</span> Consumer<Throwable>() {</td></tr>
<tr><td class="hl-num" data-line="132"></td><td>            <span class="hl-k">@Override</span></td></tr>
<tr><td class="hl-num" data-line="133"></td><td>            <span class="hl-k">public</span> <span class="hl-k">void</span> <span class="hl-en">accept</span>(<span class="hl-k">@NonNull</span> <span class="hl-k">final</span> Throwable throwable) {</td></tr>
<tr><td class="hl-num" data-line="134"></td><td>                Log.<span class="hl-en">e</span>(TAG, <span class="hl-s">"RxJavaPlugins.ErrorHandler called with -> : "</span></td></tr>
<tr><td class="hl-num" data-line="135"></td><td>                        + <span class="hl-s">"throwable = ["</span> + throwable.<span class="hl-en">getClass</span>().<span class="hl-en">getName</span>() + <span class="hl-s">"]"</span>);</td></tr>
<tr><td class="hl-num" data-line="136"></td><td></td></tr>
<tr><td class="hl-num" data-line="137"></td><td>                <span class="hl-k">final</span> Throwable actualThrowable;</td></tr>
<tr><td class="hl-num" data-line="138"></td><td>                <span class="hl-k">if</span> (throwable <span class="hl-k">instanceof</span> UndeliverableException) {</td></tr>
<tr><td class="hl-num" data-line="139"></td><td>                    <span class="hl-cmt">// As UndeliverableException is a wrapper,</span></td></tr>
<tr><td class="hl-num" data-line="140"></td><td>                    <span class="hl-cmt">// get the cause of it to get the "real" exception</span></td></tr>
<tr><td class="hl-num" data-line="141"></td><td>                    actualThrowable = throwable.<span class="hl-en">getCause</span>();</td></tr>
<tr><td class="hl-num" data-line="142"></td><td>                } <span class="hl-k">else</span> {</td></tr>
<tr><td class="hl-num" data-line="143"></td><td>                    actualThrowable = throwable;</td></tr>
<tr><td class="hl-num" data-line="144"></td><td>                }</td></tr>
<tr><td class="hl-num" data-line="145"></td><td></td></tr>
<tr><td class="hl-num" data-line="146"></td><td>                <span class="hl-k">final</span> <span class="hl-k">List</span><Throwable> errors;</td></tr>
<tr><td class="hl-num" data-line="147"></td><td>                <span class="hl-k">if</span> (actualThrowable <span class="hl-k">instanceof</span> CompositeException) {</td></tr>
<tr><td class="hl-num" data-line="148"></td><td>                    errors = ((CompositeException) actualThrowable).<span class="hl-en">getExceptions</span>();</td></tr>
<tr><td class="hl-num" data-line="149"></td><td>                } <span class="hl-k">else</span> {</td></tr>
<tr><td class="hl-num" data-line="150"></td><td>                    errors = Collections.<span class="hl-en">singletonList</span>(actualThrowable);</td></tr>
<tr><td class="hl-num" data-line="151"></td><td>                }</td></tr>
<tr><td class="hl-num" data-line="152"></td><td></td></tr>
<tr><td class="hl-num" data-line="153"></td><td>                <span class="hl-k">for</span> (<span class="hl-k">final</span> Throwable error : errors) {</td></tr>
<tr><td class="hl-num" data-line="154"></td><td>                    <span class="hl-k">if</span> (<span class="hl-en">isThrowableIgnored</span>(error)) {</td></tr>
<tr><td class="hl-num" data-line="155"></td><td>                        <span class="hl-k">return</span>;</td></tr>
<tr><td class="hl-num" data-line="156"></td><td>                    }</td></tr>
<tr><td class="hl-num" data-line="157"></td><td>                    <span class="hl-k">if</span> (<span class="hl-en">isThrowableCritical</span>(error)) {</td></tr>
<tr><td class="hl-num" data-line="158"></td><td>                        <span class="hl-en">reportException</span>(error);</td></tr>
<tr><td class="hl-num" data-line="159"></td><td>                        <span class="hl-k">return</span>;</td></tr>
<tr><td class="hl-num" data-line="160"></td><td>                    }</td></tr>
<tr><td class="hl-num" data-line="161"></td><td>                }</td></tr>
<tr><td class="hl-num" data-line="162"></td><td>            }</td></tr>
<tr><td class="hl-num" data-line="163"></td><td></td></tr>
<tr><td class="hl-num" data-line="164"></td><td>            <span class="hl-k">private</span> <span class="hl-k">boolean</span> <span class="hl-en">isThrowableIgnored</span>(<span class="hl-k">@NonNull</span> <span class="hl-k">final</span> Throwable throwable) {</td></tr>
<tr><td class="hl-num" data-line="165"></td><td>                <span class="hl-cmt">// Don't crash the application over a simple network problem</span></td></tr>
<tr><td class="hl-num" data-line="166"></td><td>                <span class="hl-k">return</span> ExceptionUtils.<span class="hl-en">hasAssignableCause</span>(throwable,</td></tr>
<tr><td class="hl-num" data-line="167"></td><td>                        <span class="hl-cmt">// network api cancellation</span></td></tr>
<tr><td class="hl-num" data-line="168"></td><td>                        IOException.<span class="hl-k">class</span>, SocketException.<span class="hl-k">class</span>,</td></tr>
<tr><td class="hl-num" data-line="169"></td><td>                        <span class="hl-cmt">// blocking code disposed</span></td></tr>
<tr><td class="hl-num" data-line="170"></td><td>                        InterruptedException.<span class="hl-k">class</span>, InterruptedIOException.<span class="hl-k">class</span>);</td></tr>
<tr><td class="hl-num" data-line="171"></td><td>            }</td></tr>
<tr><td class="hl-num" data-line="172"></td><td></td></tr>
<tr><td class="hl-num" data-line="173"></td><td>        });</td></tr>
<tr><td class="hl-num" data-line="174"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="175"></td><td></td></tr>
<tr><td class="hl-num" data-line="176"></td><td>    <span class="hl-cmt">/**</span></td></tr>
<tr><td class="hl-num" data-line="177"></td><td><span class="hl-cmt">     * Called in {@link #attachBaseContext(Context)} after calling the {@code super} method.</span></td></tr>
<tr><td class="hl-num" data-line="178"></td><td><span class="hl-cmt">     * Should be overridden if MultiDex is enabled, since it has to be initialized before ACRA.</span></td></tr>
<tr><td class="hl-num" data-line="179"></td><td><span class="hl-cmt">     */</span></td></tr>
<tr><td class="hl-num" data-line="180"></td><td>    <span class="hl-k">protected</span> <span class="hl-k">void</span> <span class="hl-en">initACRA</span>() {</td></tr>
<tr><td class="hl-num" data-line="181"></td><td>        <span class="hl-k">if</span> (ACRA.<span class="hl-en">isACRASenderServiceProcess</span>()) {</td></tr>
<tr><td class="hl-num" data-line="182"></td><td>            <span class="hl-k">return</span>;</td></tr>
<tr><td class="hl-num" data-line="183"></td><td>        }</td></tr>
<tr><td class="hl-num" data-line="184"></td><td></td></tr>
<tr><td class="hl-num" data-line="185"></td><td>        <span class="hl-k">try</span> {</td></tr>
<tr><td class="hl-num" data-line="186"></td><td>            <span class="hl-k">final</span> CoreConfiguration acraConfig = <span class="hl-k">new</span> <span class="hl-en">CoreConfigurationBuilder</span>(<span class="hl-c">this</span>)</td></tr>
<tr><td class="hl-num" data-line="187"></td><td>                    .<span class="hl-en">setBuildConfigClass</span>(BuildConfig.<span class="hl-k">class</span>)</td></tr>
<tr><td class="hl-num" data-line="188"></td><td>                    .<span class="hl-en">build</span>();</td></tr>
<tr><td class="hl-num" data-line="189"></td><td>            ACRA.<span class="hl-en">init</span>(<span class="hl-c">this</span>, acraConfig);</td></tr>
<tr><td class="hl-num" data-line="190"></td><td>        } <span class="hl-k">catch</span> (<span class="hl-k">final</span> ACRAConfigurationException exception) {</td></tr>
<tr><td class="hl-num" data-line="191"></td><td>            exception.<span class="hl-en">printStackTrace</span>();</td></tr>
<tr><td class="hl-num" data-line="192"></td><td>            ErrorUtil.<span class="hl-en">openActivity</span>(<span class="hl-c">this</span>, <span class="hl-k">new</span> <span class="hl-en">ErrorInfo</span>(exception,</td></tr>
<tr><td class="hl-num" data-line="193"></td><td>                    UserAction.SOMETHING_ELSE, <span class="hl-s">"Could not initialize ACRA crash report"</span>));</td></tr>
<tr><td class="hl-num" data-line="194"></td><td>        }</td></tr>
<tr><td class="hl-num" data-line="195"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="196"></td><td></td></tr>
<tr><td class="hl-num" data-line="197"></td><td>    <span class="hl-k">private</span> <span class="hl-k">void</span> <span class="hl-en">initNotificationChannels</span>() {</td></tr>
<tr><td class="hl-num" data-line="198"></td><td>        <span class="hl-cmt">// Keep the importance below DEFAULT to avoid making noise on every notification update for</span></td></tr>
<tr><td class="hl-num" data-line="199"></td><td>        <span class="hl-cmt">// the main and update channels</span></td></tr>
<tr><td class="hl-num" data-line="200"></td><td>        <span class="hl-k">final</span> NotificationChannelCompat mainChannel = <span class="hl-k">new</span> NotificationChannelCompat</td></tr>
<tr><td class="hl-num" data-line="201"></td><td>                .<span class="hl-en">Builder</span>(<span class="hl-en">getString</span>(R.string.notification_channel_id),</td></tr>
<tr><td class="hl-num" data-line="202"></td><td>                        NotificationManagerCompat.IMPORTANCE_LOW)</td></tr>
<tr><td class="hl-num" data-line="203"></td><td>                .<span class="hl-en">setName</span>(<span class="hl-en">getString</span>(R.string.notification_channel_name))</td></tr>
<tr><td class="hl-num" data-line="204"></td><td>                .<span class="hl-en">setDescription</span>(<span class="hl-en">getString</span>(R.string.notification_channel_description))</td></tr>
<tr><td class="hl-num" data-line="205"></td><td>                .<span class="hl-en">build</span>();</td></tr>
<tr><td class="hl-num" data-line="206"></td><td></td></tr>
<tr><td class="hl-num" data-line="207"></td><td>        <span class="hl-k">final</span> NotificationManagerCompat notificationManager = NotificationManagerCompat.<span class="hl-en">from</span>(<span class="hl-c">this</span>);</td></tr>
<tr><td class="hl-num" data-line="208"></td><td>        notificationManager.<span class="hl-en">createNotificationChannelsCompat</span>(Arrays.<span class="hl-en">asList</span>(mainChannel,</td></tr>
<tr><td class="hl-num" data-line="209"></td><td>                appUpdateChannel, hashChannel, errorReportChannel));</td></tr>
<tr><td class="hl-num" data-line="210"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="211"></td><td></td></tr>
<tr><td class="hl-num" data-line="212"></td><td>    <span class="hl-k">protected</span> <span class="hl-k">boolean</span> <span class="hl-en">isDisposedRxExceptionsReported</span>() {</td></tr>
<tr><td class="hl-num" data-line="213"></td><td>        <span class="hl-k">return</span> <span class="hl-c">false</span>;</td></tr>
<tr><td class="hl-num" data-line="214"></td><td>    }</td></tr>
<tr><td class="hl-num" data-line="215"></td><td></td></tr>
<tr><td class="hl-num" data-line="216"></td><td>}</td></tr>
<tr><td class="hl-num" data-line="217"></td><td></td></tr>
</tbody>
</table>